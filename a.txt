diff --git a/HKAdminCore/src/com/hk/admin/engine/ShipmentPricingEngine.java b/HKAdminCore/src/com/hk/admin/engine/ShipmentPricingEngine.java
index 997f631..a653f9f 100644
--- a/HKAdminCore/src/com/hk/admin/engine/ShipmentPricingEngine.java
+++ b/HKAdminCore/src/com/hk/admin/engine/ShipmentPricingEngine.java
@@ -5,6 +5,7 @@ import com.hk.admin.pact.dao.courier.CourierServiceInfoDao;
 import com.hk.admin.pact.dao.courier.PincodeRegionZoneDao;
 import com.hk.admin.pact.service.courier.CourierGroupService;
 import com.hk.constants.core.EnumTax;
+import com.hk.constants.courier.EnumCourierGroup;
 import com.hk.constants.payment.EnumPaymentMode;
 import com.hk.constants.courier.EnumCourier;
 import com.hk.constants.shipment.EnumBoxSize;
@@ -61,10 +62,12 @@ public class ShipmentPricingEngine {
         Shipment shipment = shippingOrder.getShipment();
         Courier courier = shipment.getCourier();
         Double weight = shipment.getBoxWeight() * 1000;
-        EnumBoxSize enumBoxSize = EnumBoxSize.getBoxSize(shipment.getBoxSize());
-        if (enumBoxSize != null) {
-            if (enumBoxSize.getWeight() > weight) {
-                weight = enumBoxSize.getWeight();
+        if (EnumCourierGroup.COMMON.getId().equals(courierGroupService.getCourierGroup(courier).getId())) {
+            EnumBoxSize enumBoxSize = EnumBoxSize.getBoxSize(shipment.getBoxSize());
+            if (enumBoxSize != null) {
+                if (enumBoxSize.getWeight() > weight) {
+                    weight = enumBoxSize.getWeight();
+                }
             }
         }
         Order order = shippingOrder.getBaseOrder();
diff --git a/HKAdminCore/src/com/hk/admin/impl/service/order/OrderSplitterServiceImpl.java b/HKAdminCore/src/com/hk/admin/impl/service/order/OrderSplitterServiceImpl.java
index c6edd6e..0e5e0c1 100644
--- a/HKAdminCore/src/com/hk/admin/impl/service/order/OrderSplitterServiceImpl.java
+++ b/HKAdminCore/src/com/hk/admin/impl/service/order/OrderSplitterServiceImpl.java
@@ -95,6 +95,11 @@ public class OrderSplitterServiceImpl implements OrderSplitterService {
         return sortedCourierCostingTreeMap.lastKey();
     }
 
+    public NavigableMap<List<DummyOrder>, Long> listSortedDummyOrderMapPractically(Order order) {
+        TreeMap<List<DummyOrder>, Long> sortedCourierCostingTreeMap = splitBOPractically(order);
+        return sortedCourierCostingTreeMap.descendingMap();
+    }
+
     public Map.Entry<List<DummyOrder>, Long> listFirstMapEntryPractically(Order order) {
         TreeMap<List<DummyOrder>, Long> sortedCourierCostingTreeMap = splitBOPractically(order);
         return sortedCourierCostingTreeMap.firstEntry();
@@ -123,7 +128,7 @@ public class OrderSplitterServiceImpl implements OrderSplitterService {
             orderLoggingService.logOrderActivityByAdmin(order, EnumOrderLifecycleActivity.OrderCouldNotBeAutoSplit, comments);
             throw new OrderSplitException(comments + ". Aborting splitting of order.", order);
         }
-        if(order.getPayment() == null){
+        if (order.getPayment() == null) {
             String comments = "No Payment Associated with order";
             orderLoggingService.logOrderActivityByAdmin(order, EnumOrderLifecycleActivity.OrderCouldNotBeAutoSplit, comments);
             throw new OrderSplitException(comments + ". Aborting splitting of order.", order);
@@ -190,17 +195,35 @@ public class OrderSplitterServiceImpl implements OrderSplitterService {
             DummyOrder dummyGgnOrder = new DummyOrder(ggnCartLineItems, ggnWarehouse, isCod, pincode, payment);
             DummyOrder dummyMumOrder = new DummyOrder(mumCartLineItems, mumWarehouse, isCod, pincode, payment);
 
-            List<DummyOrder> splitDummyOrders = Arrays.asList(dummyGgnOrder,dummyMumOrder);
-            boolean validCase = true;
+            List<DummyOrder> splitDummyOrders = Arrays.asList(dummyGgnOrder, dummyMumOrder);
+
             if (isCod) {
-                for (DummyOrder splitDummyOrder : splitDummyOrders) {
-                  if(splitDummyOrder.getAmount() < codMinAmount){
-                      validCase = false;
-                  }
-                }
+                if (!validCase(splitDummyOrders)) continue;
             }
-            if(!validCase) continue;
+
             dummyOrderCostingMap.put(splitDummyOrders, orderSplitterHelper.calculateShippingPlusTax(splitDummyOrders));
+
+            List<CartLineItem> ggnCartLineItems2 = new ArrayList<CartLineItem>();
+            ggnCartLineItems2.addAll(ggnKiCartLineItems);
+            ggnCartLineItems2.addAll(awaraCartLineItems.subList(i, awaraLineItemsSize));
+
+            List<CartLineItem> mumCartLineItems2 = new ArrayList<CartLineItem>();
+            mumCartLineItems2.addAll(mumKiCartLineItems);
+            mumCartLineItems2.addAll(awaraCartLineItems.subList(0, i));
+            DummyOrder dummyGgnOrder2 = new DummyOrder(ggnCartLineItems2, ggnWarehouse, isCod, pincode, payment);
+            DummyOrder dummyMumOrder2 = new DummyOrder(mumCartLineItems2, mumWarehouse, isCod, pincode, payment);
+
+            List<DummyOrder> splitDummyOrders2 = Arrays.asList(dummyGgnOrder2, dummyMumOrder2);
+            if (isCod) {
+                if (!validCase(splitDummyOrders2)) continue;
+            }
+            dummyOrderCostingMap.put(splitDummyOrders2, orderSplitterHelper.calculateShippingPlusTax(splitDummyOrders2));
+        }
+
+        if (dummyOrderCostingMap.size() == 0) {
+            String comments = "System could not split the order, Please report to tech ";
+            orderLoggingService.logOrderActivityByAdmin(order, EnumOrderLifecycleActivity.OrderCouldNotBeAutoSplit, comments);
+            throw new OrderSplitException(comments + ". Aborting splitting of order.", order);
         }
 
         MapValueComparator mapValueComparator = new MapValueComparator(dummyOrderCostingMap);
@@ -210,6 +233,34 @@ public class OrderSplitterServiceImpl implements OrderSplitterService {
         return sortedCourierCostingTreeMap;
     }
 
+/*
+    private List<DummyOrder> createDummyOrders(Order order, Pincode pincode, List<CartLineItem> ggnKiCartLineItems, List<CartLineItem> mumKiCartLineItems, List<CartLineItem> awaraCartLineItems) {
+        List<CartLineItem> ggnCartLineItems = new ArrayList<CartLineItem>();
+        ggnCartLineItems.addAll(ggnKiCartLineItems);
+        ggnCartLineItems.addAll(awaraCartLineItems.subList(0, i));
+
+        List<CartLineItem> mumCartLineItems = new ArrayList<CartLineItem>();
+        mumCartLineItems.addAll(mumKiCartLineItems);
+        mumCartLineItems.addAll(awaraCartLineItems.subList(i, awaraLineItemsSize));
+
+        DummyOrder dummyGgnOrder = new DummyOrder(ggnCartLineItems, ggnWarehouse, order.isCOD(), pincode, order.getPayment());
+        DummyOrder dummyMumOrder = new DummyOrder(mumCartLineItems, mumWarehouse, isCod, pincode, payment);
+
+        List<DummyOrder> splitDummyOrders = Arrays.asList(dummyGgnOrder,dummyMumOrder);
+    }
+*/
+
+    private boolean validCase(List<DummyOrder> splitDummyOrders) {
+        boolean validCase = true;
+        for (DummyOrder splitDummyOrder : splitDummyOrders) {
+            double amount = splitDummyOrder.getAmount();
+            if (splitDummyOrder.getCartLineItemList().size() > 0 && amount > 0D && amount < codMinAmount) {
+                validCase = false;
+            }
+        }
+        return validCase;
+    }
+
 
     public TreeMap<List<DummyOrder>, Long> splitBOIdeally(Order order, Warehouse ggnWarehouse, Warehouse mumWarehouse) {
         // get static things
@@ -256,7 +307,7 @@ public class OrderSplitterServiceImpl implements OrderSplitterService {
         return sortedCourierCostingTreeMap;
     }
 
-    public Map<Warehouse,Set<CartLineItem>> splitBOExcludingShippingTaxConsideration(Order order){
+    public Map<Warehouse, Set<CartLineItem>> splitBOExcludingShippingTaxConsideration(Order order) {
         Set<CartLineItem> productCartLineItems = new CartLineItemFilter(order.getCartLineItems()).addCartLineItemType(EnumCartLineItemType.Product).filter();
         Map<CartLineItem, Set<Warehouse>> cartLineItemWarehouseListMap = new HashMap<CartLineItem, Set<Warehouse>>();
 
@@ -327,7 +378,7 @@ public class OrderSplitterServiceImpl implements OrderSplitterService {
                 }
             }
         }
-       return warehouseLineItemSetMap;
+        return warehouseLineItemSetMap;
     }
 
 }
\ No newline at end of file
diff --git a/HKCommon/src/com/hk/constants/FbConstants.java b/HKCommon/src/com/hk/constants/FbConstants.java
index cb93eea..539b337 100644
--- a/HKCommon/src/com/hk/constants/FbConstants.java
+++ b/HKCommon/src/com/hk/constants/FbConstants.java
@@ -1,78 +1,70 @@
 package com.hk.constants;
 
+import org.springframework.stereotype.Component;
+import org.springframework.beans.factory.annotation.Value;
+import com.hk.constants.core.Keys;
 
+@Component
 public class FbConstants {
 
-    
-    //TODO: rewrite
-    
-  public static final String fbFanAppId="";
-  
-  public static final String fbFanPageId="";
 
-  public static final String apiKey="";
-  public static final String apiSecret="";
-  public static final String appId="";
-  public static final String appUrl="";
-
-  public static final String contestApiKey="";
-  public static final String contestApiSecret="";
-  public static final String contestAppId="";
-  public static final String contestAppUrl="";
-
-  public static final String promoApiKey="";
-  public static final String promoApiSecret="";
-  public static final String promoAppId="";
-  public static final String promoAppUrl="";
-
-  public static final String promo2ApiKey="";
-  public static final String promo2ApiSecret="";
-  public static final String promo2AppId="";
-  public static final String promo2AppUrl ="";
-
-  static {
-  /*  fbFanAppId = ServiceLocatorFactory.getService(Key.get(String.class, Names.named(Keys.Env.fbFanAppId)));
-    fbFanPageId = ServiceLocatorFactory.getService(Key.get(String.class, Names.named(Keys.Env.fbFanPageId)));
-
-    apiKey = ServiceLocatorFactory.getService(Key.get(String.class, Names.named(Keys.Env.fbApiKey)));
-    apiSecret = ServiceLocatorFactory.getService(Key.get(String.class, Names.named(Keys.Env.fbApiSecret)));
-    appId = ServiceLocatorFactory.getService(Key.get(String.class, Names.named(Keys.Env.fbAppId)));
-    appUrl = ServiceLocatorFactory.getService(Key.get(String.class, Names.named(Keys.Env.fbAppUrl)));
-
-    contestApiKey = ServiceLocatorFactory.getService(Key.get(String.class, Names.named(Keys.Env.fbContestApiKey)));
-    contestApiSecret = ServiceLocatorFactory.getService(Key.get(String.class, Names.named(Keys.Env.fbContestApiSecret)));
-    contestAppId = ServiceLocatorFactory.getService(Key.get(String.class, Names.named(Keys.Env.fbContestAppId)));
-    contestAppUrl = ServiceLocatorFactory.getService(Key.get(String.class, Names.named(Keys.Env.fbContestAppUrl)));
-
-    promoApiKey = ServiceLocatorFactory.getService(Key.get(String.class, Names.named   (Keys.Env.fbPromoApiKey)));
-    promoApiSecret = ServiceLocatorFactory.getService(Key.get(String.class, Names.named(Keys.Env.fbPromoApiSecret)));
-    promoAppId = ServiceLocatorFactory.getService(Key.get(String.class, Names.named    (Keys.Env.fbPromoAppId)));
-    promoAppUrl = ServiceLocatorFactory.getService(Key.get(String.class, Names.named   (Keys.Env.fbPromoAppUrl)));
-
-    promo2ApiKey = ServiceLocatorFactory.getService(Key.get(String.class, Names.named   (Keys.Env.fbPromo2ApiKey)));
-    promo2ApiSecret = ServiceLocatorFactory.getService(Key.get(String.class, Names.named(Keys.Env.fbPromo2ApiSecret)));
-    promo2AppId = ServiceLocatorFactory.getService(Key.get(String.class, Names.named    (Keys.Env.fbPromo2AppId)));
-    promo2AppUrl = ServiceLocatorFactory.getService(Key.get(String.class, Names.named   (Keys.Env.fbPromo2AppUrl)));
-*/  
-      //TODO: rewrite
-      }
+	@Value("#{hkEnvProps['" + Keys.Env.fbFanAppId + "']}")
+  public static String fbFanAppId;
+
+	@Value("#{hkEnvProps['" + Keys.Env.fbFanPageId + "']}")
+  public static  String fbFanPageId="";
+	@Value("#{hkEnvProps['" + Keys.Env.fbApiKey + "']}")
+  public static  String apiKey="";
+	@Value("#{hkEnvProps['" + Keys.Env.fbApiSecret + "']}")
+  public static  String apiSecret="";
+	@Value("#{hkEnvProps['" + Keys.Env.fbAppId + "']}")
+  public static  String appId="";
+	@Value("#{hkEnvProps['" + Keys.Env.fbAppUrl + "']}")
+  public static  String appUrl="";
+
+	@Value("#{hkEnvProps['" + Keys.Env.fbContestApiKey + "']}")
+  public static  String contestApiKey="";
+	@Value("#{hkEnvProps['" + Keys.Env.fbContestApiSecret + "']}")
+  public static  String contestApiSecret="";
+	@Value("#{hkEnvProps['" + Keys.Env.fbContestAppId + "']}")
+  public static  String contestAppId="";
+	@Value("#{hkEnvProps['" + Keys.Env.fbContestAppUrl + "']}")
+  public static  String contestAppUrl="";
+
+	@Value("#{hkEnvProps['" + Keys.Env.fbPromoApiKey + "']}")
+  public static  String promoApiKey="";
+	@Value("#{hkEnvProps['" + Keys.Env.fbPromoApiSecret + "']}")
+  public static  String promoApiSecret="";
+	@Value("#{hkEnvProps['" + Keys.Env.fbPromoAppId + "']}")
+  public static  String promoAppId="";
+	@Value("#{hkEnvProps['" + Keys.Env.fbPromoAppUrl + "']}")
+  public static  String promoAppUrl="";
+
+	@Value("#{hkEnvProps['" + Keys.Env.fbPromo2ApiKey + "']}")
+  public static  String promo2ApiKey="";
+	@Value("#{hkEnvProps['" + Keys.Env.fbPromo2ApiSecret + "']}")
+  public static  String promo2ApiSecret="";
+	@Value("#{hkEnvProps['" + Keys.Env.fbPromo2AppId + "']}")
+  public static  String promo2AppId="";
+	@Value("#{hkEnvProps['" + Keys.Env.fbPromo2AppUrl + "']}")
+  public static  String promo2AppUrl ="";
 
   public static class Session {
-    public static final String fbUserClient = "fbUserClient";
-    public static final String fbQueryString = "fbQueryString";
+    public static  String fbUserClient = "fbUserClient";
+    public static  String fbQueryString = "fbQueryString";
   }
 
   public static class Param {
-    public static final String fb_sig = "fb_sig";
-    public static final String signed_request = "signed_request";
+    public static  String fb_sig = "fb_sig";
+    public static  String signed_request = "signed_request";
 
     // for params in the session cookie
-    public static final String access_token = "access_token";
-    public static final String expires = "expires";
-    public static final String secret = "secret";
-    public static final String session_key = "session_key";
-    public static final String sig = "sig";
-    public static final String uid = "uid";
+    public static  String access_token = "access_token";
+    public static  String expires = "expires";
+    public static  String secret = "secret";
+    public static  String session_key = "session_key";
+    public static  String sig = "sig";
+    public static  String uid = "uid";
 
   }
 
diff --git a/HKCommon/src/com/hk/constants/payment/EnumPaymentStatus.java b/HKCommon/src/com/hk/constants/payment/EnumPaymentStatus.java
index f18d9c8..527840f 100644
--- a/HKCommon/src/com/hk/constants/payment/EnumPaymentStatus.java
+++ b/HKCommon/src/com/hk/constants/payment/EnumPaymentStatus.java
@@ -56,5 +56,9 @@ public enum EnumPaymentStatus {
     return getEnumIDs(Arrays.asList(EnumPaymentStatus.SUCCESS));
   }
 
+  public static List<Long> getPaymentSuccessPageStatusIds() {
+      return getEnumIDs(Arrays.asList(EnumPaymentStatus.SUCCESS,EnumPaymentStatus.ON_DELIVERY, EnumPaymentStatus.AUTHORIZATION_PENDING));
+  }
+
 }
 
diff --git a/HKCommon/src/com/hk/domain/catalog/category/CategoryImage.java b/HKCommon/src/com/hk/domain/catalog/category/CategoryImage.java
index 3969d85..8ba176b 100644
--- a/HKCommon/src/com/hk/domain/catalog/category/CategoryImage.java
+++ b/HKCommon/src/com/hk/domain/catalog/category/CategoryImage.java
@@ -60,6 +60,8 @@ public class CategoryImage implements java.io.Serializable {
   private Long ranking;
   @Column(name = "link", nullable = true, length = 45)
        private String link;
+  @Column(name = "position", nullable = true)
+  private String position;
 
      public String getLink() {
        return link;
@@ -142,6 +144,13 @@ public class CategoryImage implements java.io.Serializable {
     this.uploaded = uploaded;
   }
 
+  public String getPosition() {
+    return position;
+  }
+
+  public void setPosition(String position) {
+    this.position = position;
+  }
 
   @Override
   public String toString() {
diff --git a/HKCommon/src/com/hk/domain/courier/CourierGroup.java b/HKCommon/src/com/hk/domain/courier/CourierGroup.java
index 330713a..24657f1 100644
--- a/HKCommon/src/com/hk/domain/courier/CourierGroup.java
+++ b/HKCommon/src/com/hk/domain/courier/CourierGroup.java
@@ -66,6 +66,12 @@ public class CourierGroup implements java.io.Serializable {
   public int hashCode() {
     return name.hashCode();
   }
+
+    @Override
+    public String toString() {
+        return id != null ? id.toString() : "";
+    }
+
 }
 
 
diff --git a/HKCommon/src/com/hk/domain/courier/RegionType.java b/HKCommon/src/com/hk/domain/courier/RegionType.java
index c449274..6995f54 100644
--- a/HKCommon/src/com/hk/domain/courier/RegionType.java
+++ b/HKCommon/src/com/hk/domain/courier/RegionType.java
@@ -28,6 +28,11 @@ public class RegionType implements java.io.Serializable {
     @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = "regionType")
     private Set<PincodeRegionZone> pincodeRegionZones = new HashSet<PincodeRegionZone>(0);
 
+    @Override
+    public String toString() {
+        return id != null ? id.toString() : "";
+    }
+
     public Long getId() {
         return this.id;
     }
diff --git a/HKCore/src/com/hk/impl/service/order/OrderServiceImpl.java b/HKCore/src/com/hk/impl/service/order/OrderServiceImpl.java
index 9878e14..8708361 100644
--- a/HKCore/src/com/hk/impl/service/order/OrderServiceImpl.java
+++ b/HKCore/src/com/hk/impl/service/order/OrderServiceImpl.java
@@ -343,24 +343,26 @@ public class OrderServiceImpl implements OrderService {
 
             // Create Shipping orders and Save it in DB
             for (DummyOrder dummyOrder : dummyOrders) {
-                Warehouse warehouse = dummyOrder.getWarehouse();
-                ShippingOrder shippingOrder = shippingOrderService.createSOWithBasicDetails(order, warehouse);
-                for (CartLineItem cartLineItem : dummyOrder.getCartLineItemList()) {
-                    Sku sku = skuService.getSKU(cartLineItem.getProductVariant(), warehouse);
-                    LineItem shippingOrderLineItem = LineItemHelper.createLineItemWithBasicDetails(sku, shippingOrder, cartLineItem);
-                    shippingOrder.getLineItems().add(shippingOrderLineItem);
+                if (dummyOrder.getCartLineItemList().size() > 0) {
+                    Warehouse warehouse = dummyOrder.getWarehouse();
+                    ShippingOrder shippingOrder = shippingOrderService.createSOWithBasicDetails(order, warehouse);
+                    for (CartLineItem cartLineItem : dummyOrder.getCartLineItemList()) {
+                        Sku sku = skuService.getSKU(cartLineItem.getProductVariant(), warehouse);
+                        LineItem shippingOrderLineItem = LineItemHelper.createLineItemWithBasicDetails(sku, shippingOrder, cartLineItem);
+                        shippingOrder.getLineItems().add(shippingOrderLineItem);
+                    }
+                    shippingOrder.setBasketCategory(getBasketCategory(shippingOrder).getName());
+                    ShippingOrderHelper.updateAccountingOnSOLineItems(shippingOrder, order);
+                    shippingOrder.setAmount(ShippingOrderHelper.getAmountForSO(shippingOrder));
+                    shippingOrder = shippingOrderService.save(shippingOrder);
+                    /**
+                     * this additional call to save is done so that we have shipping order id to generate shipping order
+                     * gateway id
+                     */
+                    shippingOrder = ShippingOrderHelper.setGatewayIdOnShippingOrder(shippingOrder);
+                    shippingOrder = shippingOrderService.save(shippingOrder);
+                    shippingOrders.add(shippingOrder);
                 }
-                shippingOrder.setBasketCategory(getBasketCategory(shippingOrder).getName());
-                ShippingOrderHelper.updateAccountingOnSOLineItems(shippingOrder, order);
-                shippingOrder.setAmount(ShippingOrderHelper.getAmountForSO(shippingOrder));
-                shippingOrder = shippingOrderService.save(shippingOrder);
-                /**
-                 * this additional call to save is done so that we have shipping order id to generate shipping order
-                 * gateway id
-                 */
-                shippingOrder = ShippingOrderHelper.setGatewayIdOnShippingOrder(shippingOrder);
-                shippingOrder = shippingOrderService.save(shippingOrder);
-                shippingOrders.add(shippingOrder);
             }
 
             long endTime = (new Date()).getTime();
diff --git a/HKCore/src/com/hk/pact/service/order/OrderSplitterService.java b/HKCore/src/com/hk/pact/service/order/OrderSplitterService.java
index 6793279..23d0f46 100644
--- a/HKCore/src/com/hk/pact/service/order/OrderSplitterService.java
+++ b/HKCore/src/com/hk/pact/service/order/OrderSplitterService.java
@@ -18,6 +18,8 @@ public interface OrderSplitterService {
 
     public List<DummyOrder> listBestDummyOrdersPractically(Order order);
 
+    public NavigableMap<List<DummyOrder>, Long> listSortedDummyOrderMapPractically(Order order);
+
     public Map.Entry<List<DummyOrder>, Long> listFirstMapEntryPractically(Order order);
 
     public Map<List<DummyOrder>, Long> listAllDummyOrdersMap(Order order);
diff --git a/HKWeb/resources/staging/WEB-INF/environment.properties b/HKWeb/resources/staging/WEB-INF/environment.properties
index 4af95c0..c0ca88b 100644
--- a/HKWeb/resources/staging/WEB-INF/environment.properties
+++ b/HKWeb/resources/staging/WEB-INF/environment.properties
@@ -36,12 +36,12 @@ categoryHealthkart=category+stag@healthkart.com
 
 logisticsAdminEmails=animesh+stag@healthkart.com, ajeet+stag@healthkart.com
 
-codCharges=70
-codMinAmount=100
-codMaxAmount=5000
-codFreeAfter=500
+codCharges=50
+codMinAmount=200
+codMaxAmount=10000
+codFreeAfter=250
 
-shippingFreeAfter=500
+shippingFreeAfter=250
 
 analytics=false
 gaCode=08321
diff --git a/HKWeb/src/com/hk/web/action/admin/order/split/PseudoOrderSplitAction.java b/HKWeb/src/com/hk/web/action/admin/order/split/PseudoOrderSplitAction.java
index 4c73d24..cfd59ae 100644
--- a/HKWeb/src/com/hk/web/action/admin/order/split/PseudoOrderSplitAction.java
+++ b/HKWeb/src/com/hk/web/action/admin/order/split/PseudoOrderSplitAction.java
@@ -55,7 +55,7 @@ public class PseudoOrderSplitAction extends BaseAction {
     public Resolution splitOrderPractically() {
         order = orderService.findByGatewayOrderId(gatewayOrderId);
         if (order != null) {
-            sortedDummyOrderMaps = orderSplitterServiceImpl.splitBOPractically(order);
+            sortedDummyOrderMaps = orderSplitterServiceImpl.listSortedDummyOrderMapPractically(order);
         } else {
             addRedirectAlertMessage(new SimpleMessage("No Order found for corresponding gateway Order ID"));
         }
diff --git a/HKWeb/src/com/hk/web/action/admin/shipment/ShipmentCostCalculatorAction.java b/HKWeb/src/com/hk/web/action/admin/shipment/ShipmentCostCalculatorAction.java
index e5043df..aa90ec1 100644
--- a/HKWeb/src/com/hk/web/action/admin/shipment/ShipmentCostCalculatorAction.java
+++ b/HKWeb/src/com/hk/web/action/admin/shipment/ShipmentCostCalculatorAction.java
@@ -13,6 +13,7 @@ import com.hk.domain.courier.Courier;
 import com.hk.domain.courier.Shipment;
 import com.hk.domain.order.Order;
 import com.hk.domain.order.ShippingOrder;
+import com.hk.domain.shippingOrder.LineItem;
 import com.hk.domain.warehouse.Warehouse;
 import com.hk.pact.dao.courier.PincodeDao;
 import com.hk.pact.dao.shippingOrder.ShippingOrderDao;
@@ -110,7 +111,16 @@ public class ShipmentCostCalculatorAction extends BaseAction {
     public Resolution calculateCourierCostingForShippingOrder(){
         ShippingOrder shippingOrder = shippingOrderDao.findByGatewayOrderId(shippingOrderId);
         Order order = shippingOrder.getBaseOrder();
-        courierCostingMap = courierCostCalculator.getCourierCostingMap(order.getAddress().getPin(), shippingOrder.getCOD(), shippingOrder.getWarehouse(), shippingOrder.getAmount(), shippingOrder.getShipment().getBoxWeight());
+        Shipment shipment = shippingOrder.getShipment();
+        Double weight = 0D;
+        if (shippingOrder.getShipment() != null) {
+            weight = shipment.getBoxWeight();
+        } else {
+            for (LineItem lineItem : shippingOrder.getLineItems()) {
+                weight = lineItem.getSku().getProductVariant().getWeight();
+            }
+        }
+        courierCostingMap = courierCostCalculator.getCourierCostingMap(order.getAddress().getPin(), shippingOrder.getCOD(), shippingOrder.getWarehouse(), shippingOrder.getAmount(), weight);
         return new ForwardResolution("/pages/admin/shipment/shipmentCostCalculator.jsp");
     }
 
diff --git a/HKWeb/src/com/hk/web/action/core/catalog/image/UploadCategoryImageAction.java b/HKWeb/src/com/hk/web/action/core/catalog/image/UploadCategoryImageAction.java
index 8a30364..2396946 100644
--- a/HKWeb/src/com/hk/web/action/core/catalog/image/UploadCategoryImageAction.java
+++ b/HKWeb/src/com/hk/web/action/core/catalog/image/UploadCategoryImageAction.java
@@ -84,12 +84,14 @@ public class UploadCategoryImageAction extends BaseAction {
 
 
 	@DontValidate
-	public Resolution manageCategoryImages() {
+public Resolution manageCategoryImages() {
 		categoryImages = categoryImageDao.getCategoryImageByCategory(category);
 		//     mainImageId = category.getMainImageId() != null ? category.getMainImageId().toString() : "";
+    if(category.getName().equalsIgnoreCase("home")){
+       return new ForwardResolution("/pages/manageHomeImages.jsp");
+    }
 		return new ForwardResolution("/pages/manageCategoryImages.jsp");
 	}
-
 	public Resolution editCategoryImageSettings() throws Exception {
 		String host = "http://".concat(StripesFilter.getConfiguration().getSslConfiguration().getUnsecureHost());
 		String contextPath = WebContext.getRequest().getContextPath();
diff --git a/HKWeb/src/com/hk/web/action/core/payment/PaymentSuccessAction.java b/HKWeb/src/com/hk/web/action/core/payment/PaymentSuccessAction.java
index 15bb9e5..f59daae 100644
--- a/HKWeb/src/com/hk/web/action/core/payment/PaymentSuccessAction.java
+++ b/HKWeb/src/com/hk/web/action/core/payment/PaymentSuccessAction.java
@@ -58,7 +58,7 @@ public class PaymentSuccessAction extends BaseAction {
 
     public Resolution pre() {
         payment = paymentDao.findByGatewayOrderId(gatewayOrderId);
-        if (payment != null && EnumPaymentStatus.getEscalablePaymentStatusIds().contains(payment.getPaymentStatus().getId())) {
+        if (payment != null && EnumPaymentStatus.getPaymentSuccessPageStatusIds().contains(payment.getPaymentStatus().getId())) {
             Order order = payment.getOrder();
             pricingDto = new PricingDto(order.getCartLineItems(), payment.getOrder().getAddress());
 
diff --git a/HKWeb/view/pages/admin/queue/shippingOrderDetailGrid.jsp b/HKWeb/view/pages/admin/queue/shippingOrderDetailGrid.jsp
index 0e18744..b95ae50 100644
--- a/HKWeb/view/pages/admin/queue/shippingOrderDetailGrid.jsp
+++ b/HKWeb/view/pages/admin/queue/shippingOrderDetailGrid.jsp
@@ -158,8 +158,8 @@
       </s:link>)
           &nbsp;&nbsp;(<s:link beanclass="com.hk.web.action.admin.order.split.PseudoOrderSplitAction"
                                class="pseudoSplitBaseOrder" event="splitOrderPractically">
-          <s:param name="s" value="${shippingOrder.baseOrder.gatewayOrderId}"/>
-          Base Order Split Analytics
+          <s:param name="gatewayOrderId" value="${shippingOrder.baseOrder.gatewayOrderId}"/>
+          BO Split Analytics
       </s:link>)
       </shiro:hasAnyRoles>
        &nbsp;&nbsp;(<s:link beanclass="com.hk.web.action.admin.shippingOrder.ShippingOrderAction" event="cancelShippingOrder"
diff --git a/HKWeb/view/pages/admin/searchOrder.jsp b/HKWeb/view/pages/admin/searchOrder.jsp
index 5d4e8d3..dfcde15 100644
--- a/HKWeb/view/pages/admin/searchOrder.jsp
+++ b/HKWeb/view/pages/admin/searchOrder.jsp
@@ -461,8 +461,8 @@
     <shiro:hasAnyRoles name="<%=RoleConstants.ROLE_GROUP_CATMAN_ADMIN%>">
         &nbsp;&nbsp;(<s:link beanclass="com.hk.web.action.admin.order.split.PseudoOrderSplitAction"
                              class="pseudoSplitBaseOrder" event="splitOrderPractically">
-        <s:param name="s" value="${order.gatewayOrderId}"/>
-        Base Order Split Analytics
+        <s:param name="gatewayOrderId" value="${order.gatewayOrderId}"/>
+        BO Split Analytics
     </s:link>)
     </shiro:hasAnyRoles>
 
diff --git a/HKWeb/view/pages/home.jsp b/HKWeb/view/pages/home.jsp
index bd36e72..7a99831 100644
--- a/HKWeb/view/pages/home.jsp
+++ b/HKWeb/view/pages/home.jsp
@@ -6,194 +6,252 @@
 <s:layout-render name="/layouts/genericG.jsp"
                  pageTitle="HealthKart.com: Buy Nutrition, Health Care, Beauty & Personal Care Products Online in India">
 
-  <s:layout-component name="htmlHead">
-    <meta name="description"
-          content="Online Shopping for Nutrition, Health, Beauty & Personal Care Products in India: Buy Nutrition Supplements, Health Equipments, Diabetes supplies, Lenses, Home Devices & Other Products online at Lowest Price & Free Shipping in India – Healthkart.com"/>
-    <meta name="keywords"
-          content="Online Shopping, online shopping india, nutrition, healthcare products, buy health care health equipments, beauty care products, shop online, nutrition supplements, protein supplements, diabetes, skin care, eye care,  healthcart, healthkkart, healthkarts, price, india"/>
-
-    <link href="<hk:vhostCss/>/css/960.24.css" rel="stylesheet" type="text/css"/>
-    <script type="text/javascript" src="<hk:vhostJs/>/js/jquery.responsiveslides.min.js"></script>
-  </s:layout-component>
-
- 
-
- <%-- <s:layout-component name="topBanner">
-    <jsp:include page="/categoryBanners/holiBanner.jsp"/>
-  </s:layout-component>--%>
-
-  <s:layout-component name="homePageTopContent">
-    <div style="visibility:hidden;"><link rel="shortcut icon" href="http://www.healthkart.com/favicon.ico?v=2" /></div>
-    <div id="home_header02">
-    <h1>the one stop shop for health, fitness and beauty</h1>
-
-      <a href="${pageContext.request.contextPath}/home-devices/blood-pressure/heart-rate-monitor">
-        <img class="banner01" src="<hk:vhostImage/>/images/banners/home/heartrate_monitor_sbanner.jpg" border="0" alt="Launching Heart Rate Monitors - upto 28% off"/>
-      </a>
-      <a href="http://www.healthkart.com/nutrition/sports-nutrition?brand=Ultimate+Nutrition">
-        <img class="banner01" src="<hk:vhostImage/>/images/banners/home/ultimate-nutrition_sbanner.jpg" border="0" alt="Ultimate Nutrition - free shaker"/>
-      </a>
-      <a href="http://www.healthkart.com/revital">
-        <img src="<hk:vhostImage/>/images/banners/home/revital_sbanner.jpg" border="0" alt="Revital - Great health, Great deals"/>
-      </a>
-
-    <%--<div class="banner01">--%>
-      <%--<ul class="slides">--%>
-        <%--<li><a href="${pageContext.request.contextPath}/home-devices/blood-pressure/heart-rate-monitor">--%>
-          <%--<img class="banner01" src="<hk:vhostImage/>/images/banners/home/heartrate_monitor_sbanner.jpg" border="0" alt="Launching Heart Rate Monitors - upto 28% off"/>--%>
-        <%--</a></li>--%>
-        <%--<li><a href="${pageContext.request.contextPath}/product/equinox-irresistible-offer/CMB-HD005">--%>
-          <%--<img class="banner01" src="<hk:vhostImage/>/images/banners/home/equinox.jpg" border="0" alt="Free Body Fat Monitor with Equinox BP Monitor"/>--%>
-        <%--</a></li>--%>
-      <%--</ul>--%>
-    <%--</div>--%>
-
-    <%--<div class="banner01">--%>
-      <%--<ul class="slides">--%>
-        <%--<li>--%>
-          <%--<a href="${pageContext.request.contextPath}/pages/lp/eye_glasses/choosing-eye-glasses.html">--%>
-            <%--<img class="banner01" src="<hk:vhostImage/>/images/banners/home/home_banner_frames.jpg" border="0" alt="Choose an eyeframe?"/>--%>
-          <%--</a>--%>
-        <%--</li>--%>
-        <%--<li>--%>
-          <%--<a href="${pageContext.request.contextPath}/sports/apparel?brand=STAG"><img class="banner01" src="<hk:vhostImage/>/images/banners/home/stag_sbanner.jpg" border="0" alt="Stag brand"/></a>--%>
-        <%--</li>--%>
-      <%--</ul>--%>
-    <%--</div>--%>
-
-      <%--<div class="banner01" style="margin-right: 0">--%>
-       <%--<ul class="slides">--%>
-         <%--<li>--%>
-           <%--<a href="http://www.healthkart.com/nutrition/sports-nutrition?brand=Ultimate+Nutrition">--%>
-             <%--<img src="<hk:vhostImage/>/images/banners/home/ultimate_sbanner.jpg" border="0" alt="Ultimate Nutrition - free shaker"/>--%>
-           <%--</a>--%>
-         <%--</li>--%>
-          <%--<li>--%>
+    <s:layout-component name="htmlHead">
+        <meta name="description"
+              content="Online Shopping for Nutrition, Health, Beauty & Personal Care Products in India: Buy Nutrition Supplements, Health Equipments, Diabetes supplies, Lenses, Home Devices & Other Products online at Lowest Price & Free Shipping in India – Healthkart.com"/>
+        <meta name="keywords"
+              content="Online Shopping, online shopping india, nutrition, healthcare products, buy health care health equipments, beauty care products, shop online, nutrition supplements, protein supplements, diabetes, skin care, eye care,  healthcart, healthkkart, healthkarts, price, india"/>
+
+        <link href="<hk:vhostCss/>/css/960.24.css" rel="stylesheet" type="text/css"/>
+        <script type="text/javascript" src="<hk:vhostJs/>/js/jquery.responsiveslides.min.js"></script>
+    </s:layout-component>
+
+
+
+    <%-- <s:layout-component name="topBanner">
+      <jsp:include page="/categoryBanners/holiBanner.jsp"/>
+    </s:layout-component>--%>
+
+    <s:layout-component name="homePageTopContent">
+        <div style="visibility:hidden;"><link rel="shortcut icon" href="http://www.healthkart.com/favicon.ico?v=2" /></div>
+        <div id="home_header02">
+            <h1>the one stop shop for health, fitness and beauty</h1>
+
+            <%--<a href="${pageContext.request.contextPath}/product/equinox-irresistible-offer/CMB-HD005">--%>
+                <%--<img class="banner01" src="<hk:vhostImage/>/images/banners/home/equinox.jpg" border="0" alt="Equinox - free body fat monitor"/>--%>
+            <%--</a>--%>
             <%--<a href="http://www.healthkart.com/nutrition/sports-nutrition?brand=Dymatize">--%>
-              <%--<img src="<hk:vhostImage/>/images/banners/home/dymatize_sbanner.jpg" border="0" alt="Dymatize - free shaker"/>--%>
+                <%--<img class="banner01" src="<hk:vhostImage/>/images/banners/home/dymatize_sbanner.jpg" border="0" alt="Dymatize - free shaker"/>--%>
+            <%--</a>--%>
+            <%--<a href="http://www.healthkart.com/revital">--%>
+                <%--<img src="<hk:vhostImage/>/images/banners/home/revital_sbanner.jpg" border="0" alt="Revital - Great health, Great deals"/>--%>
             <%--</a>--%>
-          <%--</li>--%>
-      <%--</ul>--%>
-      <%--</div>--%>
-      <%--<script>--%>
-        <%--$(function () {--%>
-          <%--$(".slides").responsiveSlides({speed: 6000});--%>
-        <%--});--%>
-      <%--</script>--%>
-
-    <img class="strip_banner01" src="<hk:vhostImage/>/images/banners/home/main_strip01.png" border="0" />
-    <jsp:include page="/includes/_testimonials.jsp"/>
-    </div>
-  </s:layout-component>
-
-
-  <s:layout-component name="content">
-    <div class="container_24">
-      <shiro:hasRole name="<%=RoleConstants.GOD%>">
-        <%--<div class="grid_24 alpha omega">--%>
-          <%--<s:link beanclass="com.hk.web.action.core.catalog.image.UploadCategoryImageAction" event="pre" target="_blank" class="popup"> Upload--%>
-            <%--<s:param name="category" value="${homeBean.category.name}"/>--%>
-          <%--</s:link>--%>
-          <%--&nbsp;|&nbsp;--%>
-          <%--<s:link beanclass="com.hk.web.action.core.catalog.image.UploadCategoryImageAction" event="manageCategoryImages" target="_blank"--%>
-                  <%--class="popup">--%>
-            <%--<s:param name="category" value="${homeBean.category.name}"/>--%>
-            <%--Manage Images--%>
-          <%--</s:link>--%>
-        <%--</div>--%>
-
-        <%--<div class="clear"></div>--%>
-
-        <div class="grid_24 alpha omega">
-          <s:link beanclass="com.hk.web.action.core.catalog.category.CategoryAction" event="editPrimaryCategoryHeadings"
-                  class="popup" style="font-size:larger; background-color:#003399; color:white;" target="_blank">
-            Add/Edit Headings for home
-            <s:param name="category" value="${homeBean.category.name}"/>
-          </s:link>
+
+          <div class="banner01">
+                <ul class="slides ulStyle">
+                  <%--<li><a href="${pageContext.request.contextPath}/home-devices/blood-pressure/heart-rate-monitor">--%>
+                    <%--<img class="banner01" src="<hk:vhostImage/>/images/banners/home/heartrate_monitor_sbanner.jpg" border="0" alt="Launching Heart Rate Monitors - upto 28% off"/>--%>
+                  <%--</a></li>--%>
+                  <%--<li><a href="${pageContext.request.contextPath}/product/equinox-irresistible-offer/CMB-HD005">--%>
+                    <%--<img class="banner01" src="<hk:vhostImage/>/images/banners/home/equinox.jpg" border="0" alt="Free Body Fat Monitor with Equinox BP Monitor"/>--%>
+                  <%--</a></li>--%>
+                  <c:forEach var="image" items="${homeBean.categoryImages}">
+                  <c:choose>
+                    <c:when test="${hk:isNotBlank(image.link) && fn:toLowerCase(image.position) eq('left')}">
+                      <li>
+                        <a href="${pageContext.request.contextPath}${image.link}">
+                          <hk:categoryImage imageId="${image.id}" size="<%=EnumImageSize.Original%>"/>
+                        </a>
+                      </li>
+                    </c:when>
+
+                    <c:when test="${fn:toLowerCase(image.position) eq('left')}">
+                      <li><hk:categoryImage imageId="${image.id}" size="<%=EnumImageSize.Original%>"/></li>
+                    </c:when>
+
+                  </c:choose>
+                </c:forEach>
+                </ul>
+              </div>
+
+              <div class="banner01">
+                <ul class="slides ulStyle">
+                  <%--<li>--%>
+                    <%--<a href="${pageContext.request.contextPath}/pages/lp/eye_glasses/choosing-eye-glasses.html">--%>
+                      <%--<img class="banner01" src="<hk:vhostImage/>/images/banners/home/home_banner_frames.jpg" border="0" alt="Choose an eyeframe?"/>--%>
+                    <%--</a>--%>
+                  <%--</li>--%>
+                  <%--<li>--%>
+                    <%--<a href="${pageContext.request.contextPath}/sports/apparel?brand=STAG"><img class="banner01" src="<hk:vhostImage/>/images/banners/home/stag_sbanner.jpg" border="0" alt="Stag brand"/></a>--%>
+                  <%--</li>--%>
+                  <c:forEach var="image" items="${homeBean.categoryImages}">
+                  <c:choose>
+                    <c:when test="${hk:isNotBlank(image.link) && fn:toLowerCase(image.position) eq('center')}">
+                      <li>
+                        <a href="${pageContext.request.contextPath}${image.link}">
+                          <hk:categoryImage imageId="${image.id}" size="<%=EnumImageSize.Original%>"/>
+                        </a>
+                      </li>
+                    </c:when>
+
+                    <c:when test="${fn:toLowerCase(image.position) eq('center')}">
+                      <li><hk:categoryImage imageId="${image.id}" size="<%=EnumImageSize.Original%>"/></li>
+                    </c:when>
+
+                  </c:choose>
+                </c:forEach>
+                </ul>
+              </div>
+
+                <div class="banner01" style="margin-right: 0">
+                 <ul class="slides ulStyle">
+                   <%--<li>--%>
+                     <%--<a href="http://www.healthkart.com/nutrition/sports-nutrition?brand=Ultimate+Nutrition">--%>
+                       <%--<img src="<hk:vhostImage/>/images/banners/home/ultimate_sbanner.jpg" border="0" alt="Ultimate Nutrition - free shaker"/>--%>
+                     <%--</a>--%>
+                   <%--</li>--%>
+                    <%--<li>--%>
+                      <%--<a href="http://www.healthkart.com/nutrition/sports-nutrition?brand=Dymatize">--%>
+                        <%--<img src="<hk:vhostImage/>/images/banners/home/dymatize_sbanner.jpg" border="0" alt="Dymatize - free shaker"/>--%>
+                      <%--</a>--%>
+                    <%--</li>--%>
+                   <c:forEach var="image" items="${homeBean.categoryImages}">
+                  <c:choose>
+                    <c:when test="${hk:isNotBlank(image.link) && fn:toLowerCase(image.position) eq('right')}">
+                      <li>
+                        <a href="${pageContext.request.contextPath}${image.link}">
+                          <hk:categoryImage imageId="${image.id}" size="<%=EnumImageSize.Original%>"/>
+                        </a>
+                      </li>
+                    </c:when>
+
+                    <c:when test="${fn:toLowerCase(image.position) eq('right')}">
+                      <li><hk:categoryImage imageId="${image.id}" size="<%=EnumImageSize.Original%>"/></li>
+                    </c:when>
+
+                  </c:choose>
+                </c:forEach>
+                </ul>
+                </div>
+                <script>
+                  $(function () {
+                    $(".slides").responsiveSlides({speed: 6000});
+                  });
+                </script>
+
+
+
+            <img class="strip_banner01" src="<hk:vhostImage/>/images/banners/home/main_strip01.png" border="0" />
+            <jsp:include page="/includes/_testimonials.jsp"/>
         </div>
+    </s:layout-component>
 
-        <div class="clear"></div>
-      </shiro:hasRole>
-
-      <c:forEach var="heading" items="${homeBean.headingsWithRankingSetSortedByRanking}">
-        <c:if test="${!empty heading.products}">
-          <div class="grid_24 alpha omega" style="width: 950px;">
-            <c:choose>
-              <c:when test="${hk:isNotBlank(heading.link)}">
-                <div class="products" style="margin-left: 0;">
-                  <h2>
-                    <a href="${pageContext.request.contextPath}${heading.link}">
-                        ${heading.name}<span class='small'>   (view more products)</span>
-                    </a>
-                  </h2>
+
+    <s:layout-component name="content">
+        <div class="container_24">
+            <shiro:hasRole name="<%=RoleConstants.GOD%>">
+              <div class="grid_24 alpha omega">
+                  <s:link beanclass="com.hk.web.action.core.catalog.image.UploadCategoryImageAction" event="pre" target="_blank" class="popup"> Upload
+                    <s:param name="category" value="${homeBean.category.name}"/>
+                  </s:link>
+                  &nbsp;|&nbsp;
+                  <s:link beanclass="com.hk.web.action.core.catalog.image.UploadCategoryImageAction" event="manageCategoryImages" target="_blank"
+                          class="popup">
+                    <s:param name="category" value="${homeBean.category.name}"/>
+                    Manage Images
+                  </s:link>
                 </div>
-              </c:when>
-              <c:otherwise>
-                <div class="products"
-                     style="margin-left: 0;color: #228; font-size: 1.5em; border-bottom: 1px solid #228;">
-                  <h2>
-                    <strong>
-                        ${heading.name}
-                    </strong>
-                  </h2>
+
+                <div class="grid_24 alpha omega">
+                    <s:link beanclass="com.hk.web.action.core.catalog.category.CategoryAction" event="editPrimaryCategoryHeadings"
+                            class="popup" style="font-size:larger; background-color:#003399; color:white;" target="_blank">
+                        Add/Edit Headings for home
+                        <s:param name="category" value="${homeBean.category.name}"/>
+                    </s:link>
                 </div>
-              </c:otherwise>
-            </c:choose>
-          </div>
-          <div class="clear"></div>
-
-          <shiro:hasRole name="<%=RoleConstants.GOD%>">
-            <div class="grid_24 alpha omega" style="width: 950px;">
-              <s:link beanclass="com.hk.web.action.core.catalog.category.PrimaryCategoryHeadingAction"
-                      event="editPrimaryCategoryHeadingProducts"
-                      class="popup" style="background-color:#003399; color:white;" target="_blank">
-                Add/Edit Products for Heading
-                <s:param name="heading.id" value='${heading.id}'/>
-              </s:link>
-            </div>
-
-            <div class="clear"></div>
-          </shiro:hasRole>
-
-          <div class="grid_24" style="width: 950px;">
-            <c:forEach var="product" items='${heading.productSortedByOrderRanking}'>
-              <div class="grid_4 alpha omega">
-                <s:layout-render name="/layouts/embed/_productThumbG.jsp" productId='${product.id}'/>
-              </div>
+
+                <div class="clear"></div>
+            </shiro:hasRole>
+
+            <c:forEach var="heading" items="${homeBean.headingsWithRankingSetSortedByRanking}">
+                <c:if test="${!empty heading.products}">
+                    <div class="grid_24 alpha omega" style="width: 950px;">
+                        <c:choose>
+                            <c:when test="${hk:isNotBlank(heading.link)}">
+                                <div class="products" style="margin-left: 0;">
+                                    <h2>
+                                        <a href="${pageContext.request.contextPath}${heading.link}">
+                                                ${heading.name}<span class='small'>   (view more products)</span>
+                                        </a>
+                                    </h2>
+                                </div>
+                            </c:when>
+                            <c:otherwise>
+                                <div class="products"
+                                     style="margin-left: 0;color: #228; font-size: 1.5em; border-bottom: 1px solid #228;">
+                                    <h2>
+                                        <strong>
+                                                ${heading.name}
+                                        </strong>
+                                    </h2>
+                                </div>
+                            </c:otherwise>
+                        </c:choose>
+                    </div>
+                    <div class="clear"></div>
+
+                    <shiro:hasRole name="<%=RoleConstants.GOD%>">
+                        <div class="grid_24 alpha omega" style="width: 950px;">
+                            <s:link beanclass="com.hk.web.action.core.catalog.category.PrimaryCategoryHeadingAction"
+                                    event="editPrimaryCategoryHeadingProducts"
+                                    class="popup" style="background-color:#003399; color:white;" target="_blank">
+                                Add/Edit Products for Heading
+                                <s:param name="heading.id" value='${heading.id}'/>
+                            </s:link>
+                        </div>
+
+                        <div class="clear"></div>
+                    </shiro:hasRole>
+
+                    <div class="grid_24" style="width: 950px;">
+                        <c:forEach var="product" items='${heading.productSortedByOrderRanking}'>
+                            <div class="grid_4 alpha omega">
+                                <s:layout-render name="/layouts/embed/_productThumbG.jsp" productId='${product.id}'/>
+                            </div>
+                        </c:forEach>
+                    </div>
+                    <div class="clear"></div>
+                </c:if>
+
+                <shiro:hasRole name="<%=RoleConstants.GOD%>">
+                    <c:if test="${empty heading.products}">
+                        <div class="grid_24 alpha omega" style="width: 950px;">
+                            <s:link beanclass="com.hk.web.action.core.catalog.category.PrimaryCategoryHeadingAction"
+                                    event="addPrimaryCategoryHeadingProducts"
+                                    class="popup" style="background-color:#003399; color:white;">
+                                <strong>ADD PRODUCTS FOR HEADING: ${heading.name} (Heading not visible as no products are set for
+                                    it)</strong>
+                                <s:param name="heading.id" value='${heading.id}'/>
+                            </s:link>
+                        </div>
+                    </c:if>
+
+                    <div class="clear"></div>
+                </shiro:hasRole>
+
             </c:forEach>
-          </div>
-          <div class="clear"></div>
-        </c:if>
-
-        <shiro:hasRole name="<%=RoleConstants.GOD%>">
-          <c:if test="${empty heading.products}">
-            <div class="grid_24 alpha omega" style="width: 950px;">
-              <s:link beanclass="com.hk.web.action.core.catalog.category.PrimaryCategoryHeadingAction"
-                      event="addPrimaryCategoryHeadingProducts"
-                      class="popup" style="background-color:#003399; color:white;">
-                <strong>ADD PRODUCTS FOR HEADING: ${heading.name} (Heading not visible as no products are set for
-                  it)</strong>
-                <s:param name="heading.id" value='${heading.id}'/>
-              </s:link>
-            </div>
-          </c:if>
-
-          <div class="clear"></div>
-        </shiro:hasRole>
-
-      </c:forEach>
-    </div>
-
-    <div class="clear"></div>
-
-    <iframe src="http://www.vizury.com/analyze/analyze.php?account_id=VIZVRM112&param=e100&section=1&level=1"
-            scrolling="no"
-            width="1" height="1" marginheight="0" marginwidth="0" frameborder="0"></iframe>
-  </s:layout-component>
+        </div>
+
+        <div class="clear"></div>
+
+        <iframe src="http://www.vizury.com/analyze/analyze.php?account_id=VIZVRM112&param=e100&section=1&level=1"
+                scrolling="no"
+                width="1" height="1" marginheight="0" marginwidth="0" frameborder="0"></iframe>
+    </s:layout-component>
 </s:layout-render>
 
 <script type="text/javascript">
-  $(document).ready(function() {
-    $('#home_button').addClass("active");
-  });
+    $(document).ready(function() {
+        $('#home_button').addClass("active");
+    });
 </script>
+<style type="text/css">
+  .ulStyle{
+    list-style: none outside none;
+    margin: 0 0 1.5em 0;
+    overflow: hidden;
+    padding: 0;
+    position: relative;
+    width: 100%;
+}
+</style>
\ No newline at end of file
diff --git a/HKWeb/view/pages/manageHomeImages.jsp b/HKWeb/view/pages/manageHomeImages.jsp
new file mode 100644
index 0000000..55c8901
--- /dev/null
+++ b/HKWeb/view/pages/manageHomeImages.jsp
@@ -0,0 +1,201 @@
+<%@ page import="com.hk.constants.catalog.image.EnumImageSize" %>
+<%@ page contentType="text/html;charset=UTF-8" language="java" %>
+<%@include file="/includes/_taglibInclude.jsp" %>
+<s:useActionBean beanclass="com.hk.web.action.core.catalog.image.UploadCategoryImageAction" var="ua"/>
+
+<s:layout-render name="/layouts/defaultAdmin.jsp">
+
+  <s:layout-component name="content">
+    <%--<p>${pa.product.id}</p>--%>
+    <h2>
+        ${ua.category.displayName}
+    </h2>
+
+    <s:form beanclass="com.hk.web.action.core.catalog.image.UploadCategoryImageAction">
+      <table>
+        <tr>
+          <br>
+          <br>
+            ${ua.errorMessage}
+        </tr>
+        <tr>
+          <th>
+            Image
+          </th>
+          <th>
+            Hide
+          </th>
+          <th>
+            Rank
+          </th>
+          <td>
+            link
+          </td>
+          <td>
+            position
+          </td>
+        </tr>
+
+        <tr>
+          <td colspan="5" style="text-align:center;font-size:1.5em;">LEFT BANNERS</td>
+        </tr>
+        <tr>
+          <td colspan="5"></td>
+        </tr>
+
+        <c:forEach var="categoryImage" items="${ua.categoryImages}" varStatus="ctr">
+          <c:if test="${fn:toLowerCase(categoryImage.position) eq('left')}">
+            <tr style="border:1px">
+
+              <td>
+                <hk:categoryImage imageId="${categoryImage.id}" size="<%=EnumImageSize.MediumSize%>"/>
+              </td>
+              <td>
+                <s:checkbox name="categoryImages[${ctr.index}].hidden"/>
+              </td>
+              <td>
+                <s:text name="categoryImages[${ctr.index}].ranking"/>
+              </td>
+              <td>
+                http://www.healthkart.com <s:text name="categoryImages[${ctr.index}].link"/>
+              </td>
+              <td>
+                <s:select name="categoryImages[${ctr.index}].position">
+                  <s:option value="">-None-</s:option>
+                  <s:option value="left">Left</s:option>
+                  <s:option value="center">Center</s:option>
+                  <s:option value="right">Right</s:option>
+                </s:select>              </td>
+              <s:hidden name="categoryImages[${ctr.index}]"/>
+            </tr>
+          </c:if>
+
+        </c:forEach>
+
+        <tr>
+          <td colspan="5" style="text-align:center;font-size:1.5em;">CENTER BANNERS</td>
+        </tr>
+
+        <tr>
+          <td colspan="5"></td>
+        </tr>
+
+        <c:forEach var="categoryImage" items="${ua.categoryImages}" varStatus="ctr">
+
+          <c:if test="${fn:toLowerCase(categoryImage.position) eq('center')}">
+            <tr style="border:1px">
+              <td>
+                <hk:categoryImage imageId="${categoryImage.id}" size="<%=EnumImageSize.MediumSize%>"/>
+              </td>
+              <td>
+                <s:checkbox name="categoryImages[${ctr.index}].hidden"/>
+              </td>
+              <td>
+                <s:text name="categoryImages[${ctr.index}].ranking"/>
+              </td>
+              <td>
+                http://www.healthkart.com <s:text name="categoryImages[${ctr.index}].link"/>
+              </td>
+              <td>
+                <s:select name="categoryImages[${ctr.index}].position">
+                  <s:option value="">-None-</s:option>
+                  <s:option value="left">Left</s:option>
+                  <s:option value="center">Center</s:option>
+                  <s:option value="right">Right</s:option>
+                </s:select>
+              </td>
+              <s:hidden name="categoryImages[${ctr.index}]"/>
+            </tr>
+          </c:if>
+
+        </c:forEach>
+        <tr>
+          <td colspan="5" style="text-align:center;font-size:1.5em;">RIGHT BANNERS</td>
+        </tr>
+
+        <tr>
+          <td colspan="5"></td>
+        </tr>
+        <c:forEach var="categoryImage" items="${ua.categoryImages}" varStatus="ctr">
+
+          <c:if test="${fn:toLowerCase(categoryImage.position) eq('right')}">
+            <tr style="border:1px">
+              <td>
+                <hk:categoryImage imageId="${categoryImage.id}" size="<%=EnumImageSize.MediumSize%>"/>
+              </td>
+              <td>
+                <s:checkbox name="categoryImages[${ctr.index}].hidden"/>
+              </td>
+              <td>
+                <s:text name="categoryImages[${ctr.index}].ranking"/>
+              </td>
+              <td>
+                http://www.healthkart.com <s:text name="categoryImages[${ctr.index}].link"/>
+              </td>
+              <td>
+                <s:select name="categoryImages[${ctr.index}].position">
+                  <s:option value="">-None-</s:option>
+                  <s:option value="left">Left</s:option>
+                  <s:option value="center">Center</s:option>
+                  <s:option value="right">Right</s:option>
+                </s:select>
+              </td>
+              <s:hidden name="categoryImages[${ctr.index}]"/>
+            </tr>
+          </c:if>
+
+        </c:forEach>
+
+        <tr>
+          <td colspan="5" style="text-align:center;font-size:1.5em;">POSITION: NOT YET ASSIGNED</td>
+        </tr>
+
+        <tr>
+          <td colspan="5"></td>
+        </tr>
+
+        <c:forEach var="categoryImage" items="${ua.categoryImages}" varStatus="ctr">
+          <c:if test="${fn:toLowerCase(categoryImage.position) !='left' && fn:toLowerCase(categoryImage.position) !='center' && fn:toLowerCase(categoryImage.position) !='right'}">
+            <tr style="border:1px">
+              <td>
+                <hk:categoryImage imageId="${categoryImage.id}" size="<%=EnumImageSize.MediumSize%>"/>
+              </td>
+              <td>
+                <s:checkbox name="categoryImages[${ctr.index}].hidden"/>
+              </td>
+              <td>
+                <s:text name="categoryImages[${ctr.index}].ranking"/>
+              </td>
+              <td>
+                http://www.healthkart.com <s:text name="categoryImages[${ctr.index}].link"/>
+              </td>
+              <td>
+                <s:select name="categoryImages[${ctr.index}].position">
+                  <s:option value="">-None-</s:option>
+                  <s:option value="left">Left</s:option>
+                  <s:option value="center">Center</s:option>
+                  <s:option value="right">Right</s:option>
+                </s:select>
+              </td>
+              <s:hidden name="categoryImages[${ctr.index}]"/>
+            </tr>
+          </c:if>
+
+        </c:forEach>
+
+
+        <tr>
+          <td>
+            <s:submit name="editCategoryImageSettings" value="Submit"/>
+            <s:hidden name="category" value="${ua.category}"/>
+          </td>
+        </tr>
+      </table>
+
+    </s:form>
+
+  </s:layout-component>
+
+</s:layout-render>
+
+
diff --git a/HealthKart/db/HealthKart.mwb b/HealthKart/db/HealthKart.mwb
index fd20bf4..bf07227 100644
Binary files a/HealthKart/db/HealthKart.mwb and b/HealthKart/db/HealthKart.mwb differ
diff --git a/HealthKart/db/changelog.xml b/HealthKart/db/changelog.xml
index bcd48be..7a6b34c 100644
--- a/HealthKart/db/changelog.xml
+++ b/HealthKart/db/changelog.xml
@@ -7412,4 +7412,9 @@
     <changeSet author="Rahul (generated)" id="1337865338106-4">
         <addForeignKeyConstraint baseColumnNames="base_order_id" baseTableName="demand_history" constraintName="fk_demand_history_base_order1" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="base_order" referencesUniqueColumn="false"/>
     </changeSet>
+    <changeSet author="meenal (generated)" id="1338459443186-1">
+        <addColumn tableName="category_image">
+            <column name="position" type="VARCHAR(20)"/>
+        </addColumn>
+    </changeSet>
 </databaseChangeLog>
